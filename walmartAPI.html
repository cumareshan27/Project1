<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Walmart API</title>
</head>

<body>
    <div id="itemsArea">
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">

        var queryURL = "http://api.walmartlabs.com/v1/search?apiKey=ncprrc5qq4kqukxgnpjn69b2&query=rake"
        $.ajax({
            url: queryURL,
            method: "GET"
        }).then(function (response) {

            var imageURL = response.items[0].thumbnailImage;
            var itemsImage = $("<img>");
            itemsImage.attr("src", imageURL);
            itemsImage.attr("alt", "itemsImage");

            var itemsName = $("<div>")
            var responseArr = [];

            for (var i = 0; i < response.items.length; i++) {
                responseArr.push(response.items[i])
        

            }
            //console.log(responseArr);
        
            // console.log("Item Name:- " + response.items[0].name);
            // console.log("Item Long Description:- " + response.items[0].longDescription);
            // console.log("Item Sale Price:- " + response.items[0].salePrice);
            // console.log("Item Image:- " + response.items[0].image);
            // console.log("Item URl:- " + response.items[0].addToCartUrl);

            //code to create a string literal to display the items grouped. Retrieving the data from array which holds the responses fro API. 
            for (var i = 0; i < 4; i++) {
                var bigdiv = $("#itemsArea");
                var itemsDiv = $(`
                    <div id="name">Name: ${response.items[i].name} </div>
                    <div id="description">Description:-${response.items[i].shortDescription} </div>
                    <div id="Price">Price:- ${response.items[i].salePrice}</div>
                    <div id="imageArea${i}"><img src="${response.items[i].thumbnailImage}" alt = "items Image"></div>
                    <div><button id="addcart${i}" type="button">Add to Cart</button></div>
                `)
                //Appends the each groped items into the main DIV("#itemsArea")
                bigdiv.append(itemsDiv);
                var cartURL = responseArr[i].addToCartUrl;
                document.getElementById("addcart" + i).onclick = function () {
                    location.href = cartURL;
                };
            }

        });
    </script>
</body>

</html>